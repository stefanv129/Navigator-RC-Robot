/*
 * F401RE_RCC.h
 *
 *  Created on: Jan 27, 2025
 *      Author: voine
 */

#ifndef INC_F401RE_RCC_H_
#define INC_F401RE_RCC_H_

#include "STM32F401RE.h"

#define RCC_CFGR_HPRE_DIV1 (0x0 << 4)
#define RCC_CFGR_PPRE1_DIV2 (0x4 << 13)
#define RCC_CFGR_PPRE2_DIV2 (0x4 << 10)
#define RCC_CR_HSION 1
#define RCC_CR_PLLON (1 << 24)
#define RCC_CR_HSIRDY 2
#define RCC_CR_PLLRDY (1 << 25)
#define RCC_PLLCFGR_M 0x10
#define RCC_PLLCFGR_N (0x190 << 6)
#define RCC_PLLCFGR_P (0x5 << 16)
#define RCC_PLLCFGR_PLLSRC_HSI (0 << 22)

typedef enum{
	HSI = 0,
	PLLCLK = 1,
}SYSCLK_Src_t;


typedef struct{
	int PLL_M;
	int PLL_N;
	int PLL_P;
}PLL_Factors_t;

typedef struct{
	int AHB_Presc;
	int APB1_Presc;
	int APB2_Presc;
}Bus_Prescalers_t;


typedef struct{
	SYSCLK_Src_t CLK_Source;
	PLL_Factors_t PLL_Facs;
	Bus_Prescalers_t Prescalers;
}RCC_Config_t;

typedef struct{
	RCC_RegDef_t *pRCC;
	RCC_Config_t RCC_Config;
}RCC_Handle_t;

void RCC_Clock_Config(RCC_Handle_t *pRCC_Handle_t);





#endif /* INC_F401RE_RCC_H_ */
